{% extends 'navbar.html' %}
{% load static %}

{% block content %}
<style>
    body {
        background-image:url('https://wallpaperaccess.com/full/380889.jpg');
    }

    /* width */
    ::-webkit-scrollbar {
      width: 4px;
    }

    /* Track */
    ::-webkit-scrollbar-track {
      background: #f1f1f1;
    }

    /* Handle */
    ::-webkit-scrollbar-thumb {
      background: purple;
    }

    /* Handle on hover */
    ::-webkit-scrollbar-thumb:hover {
      background: #555;
    }
</style>
{% if request.user.is_authenticated  %}
    <section class="container p-0" style="height:100vh;">
        <div class="row m-0 p-0">
            <div class="col-3 m-0 p-0 row border">
                <div class="embed-responsive m-0 p-0" style="height:50vhbackground-color:black">
                    <img src="{{request.user.player.image.url}}" alt="" class="embed-responsive-item img-fluid" style="object-fit: cover;height:50vh;width:100%">
                </div>
                <div class="m-0 p-0 bg-dark row" style="height:25vh;">
                    <div class="contador" style="height:15vh;justify-content:center;align-items:center"></div>
                    <button class="btn btn-outline-danger exclude_fila" style="border-radius:0;max-height:6vh;visibility:hidden" onclick="sendUser(fila=false)">Sair Fila</button>
                </div>
                <div class="m-0 p-0 bg-dark" style="height:24vh;">
                    <button class="btn btn-outline-light mt-2 sender_fila" style="width:100%;border-radius:0" onclick="sendUser(fila=true)">Find Game</button>
                    <button class="btn btn-outline-light mt-2" style="width:100%;border-radius:0">Customize</button>
                    <button class="btn btn-outline-light mt-2" style="width:100%;border-radius:0">Lore</button>
                </div>
            </div>
            <div class="col-5 m-0 p-0 bg-secondary">
                <h4 class="bg-dark text-white text-center p-2 text-uppercase">{{request.user.username}}</h4>
                <h5 class="text-white p-2">Stats</h5>
                <div class="bg-secondary p-2 text-white">
                    <div class="m-0 p-0 row">
                        <p class="col-2 m-0 p-0">MAG: </p>
                        <p class="col-10 m-0 p-0">0{{request.user.player.magic}} + 0% Maniac Magic</p>
                        <p class="col-2 m-0 p-0">STR: </p>
                        <p class="col-10 m-0 p-0">0{{request.user.player.strong}} + 0% God Strong</p>
                        <p class="col-2 m-0 p-0">DEX: </p>
                        <p class="col-10 m-0 p-0">0{{request.user.player.dex}} + 0% The Paladin</p>
                        <p class="col-2 m-0 p-0">LUC: </p>
                        <p class="col-10 m-0 p-0">0{{request.user.player.luc}} + 0% So Lucky</p>

                    </div>
                    <hr class="bg-dark">
                    <p>Class: Lv. 0{{request.user.player.level}} Barbarian ( Male brown )</p>
                    <p>Experience: {{request.user.player.current_level_xp|floatformat:"0"}}/{{request.user.player.next_level_xp|floatformat:"0"}}</p>
                    <div class="progress m-0 p-0 mb-3">
                        <div class="progress-bar progress-bar-striped progress-bar-animated xp_{{request.user.username}} bg-warning" role="progressbar" style="width: {{current_xp}}%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                </div>
                <h5 class="text-white p-2">Titles</h5>
                <div class="m-0 p-2 text-white">
                    <p>~ God from another dimension</p>
                    <p>~ Levantou a m√£e do renan (The strong man guy)</p>
                </div>
            </div>
            <div class="col-4 m-0 p-0 bg-dark border">
                <h4 class="bg-dark text-white text-center p-2 text-uppercase">Records</h4>
                <div class="m-0 p-2 text-white row">
                    <h5>Wins</h5>
                    <div style="max-height:35vh; overflow-y: auto;scroll-behavior: smooth;background-color:black;border-radius:0px;border:0px;">
                        {% for rec in records %}
                        {% if rec.winner == request.user.player %}
                        <div class="m-0 mt-1 p-0 row">
                            <i class="bi bi-caret-right-fill m-0 p-1">Win!! [{{rec.played_on}}]</i>
                        </div>
                        {% endif %}
                        {% endfor %}
                    </div>
                    <h5>Loses</h5>
                    <div style="max-height:35vh; overflow-y: auto;scroll-behavior: smooth;background-color:black;border-radius:0px;border:0px;">
                        {% for rec in records%}
                        {% if rec.loser == request.user.player %}
                        <div class="m-0 mt-1 p-0 row">
                            <i class="bi bi-caret-right-fill m-0 p-1">Lose!! [{{rec.played_on}}]</i>
                        </div>
                        {% endif %}
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </section>
{% else %}
    <h1>Make login to enter the game</h1>
{% endif %}

{{ request.user.id|json_script:"user_id" }}
{{ request.user.username|json_script:"username" }}
<script src="{% static 'index.js' %}"></script>

{% endblock content %}